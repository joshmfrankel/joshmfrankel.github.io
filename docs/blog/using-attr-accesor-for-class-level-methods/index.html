<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">

  <link rel="stylesheet" href="/css/main.css">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700|Raleway:300,300i,700,700i" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">

  <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js" integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ" crossorigin="anonymous"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded",function(){
      let node = document.querySelector('.preload-transitions');
      node.classList.remove('preload-transitions');
    });
  </script>

  <link rel="alternate" type="application/rss+xml" title="Development Simplified" href="/feed.xml">

  <!-- Begin Jekyll SEO tag v2.6.0 -->
<title>Using attr_accesor for Class level methods | Development Simplified</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Using attr_accesor for Class level methods" />
<meta name="author" content="Josh Frankel (@joshmfrankel)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The beginning steps to writing a new class usually involve writing a quick def initialize method. The purpose of these type of methods is to setup any dependencies or configurations necessary for the object to fulfill its responsibility. With instance variables, a common paradigm is to use an attr_reader or attr_writer to read/write values. However, these methods specifically work off of instance variables." />
<meta property="og:description" content="The beginning steps to writing a new class usually involve writing a quick def initialize method. The purpose of these type of methods is to setup any dependencies or configurations necessary for the object to fulfill its responsibility. With instance variables, a common paradigm is to use an attr_reader or attr_writer to read/write values. However, these methods specifically work off of instance variables." />
<link rel="canonical" href="http://joshfrankel.me/blog/using-attr-accesor-for-class-level-methods/" />
<meta property="og:url" content="http://joshfrankel.me/blog/using-attr-accesor-for-class-level-methods/" />
<meta property="og:site_name" content="Development Simplified" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-04T00:00:00+00:00" />
<script type="application/ld+json">
{"datePublished":"2018-04-04T00:00:00+00:00","dateModified":"2018-04-04T00:00:00+00:00","headline":"Using attr_accesor for Class level methods","mainEntityOfPage":{"@type":"WebPage","@id":"http://joshfrankel.me/blog/using-attr-accesor-for-class-level-methods/"},"url":"http://joshfrankel.me/blog/using-attr-accesor-for-class-level-methods/","author":{"@type":"Person","name":"Josh Frankel (@joshmfrankel)"},"@type":"BlogPosting","description":"The beginning steps to writing a new class usually involve writing a quick def initialize method. The purpose of these type of methods is to setup any dependencies or configurations necessary for the object to fulfill its responsibility. With instance variables, a common paradigm is to use an attr_reader or attr_writer to read/write values. However, these methods specifically work off of instance variables.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="theme-color" content="#61b8d0"/>
</head>

  <body class="preload-transitions">
    <header class="Container Container-flex Container--smallMargin Header">

  <a href="/" class="Logo-container">
    <div class="Logo-avatarContainer">
      <img src="/img/layout/josh-frankel-author-100x100.jpg" class="Logo Logo-avatar" alt="Josh Frankel (Author)" />
      <img src="/img/layout/josh-frankel-author-hover-100x100.jpg" class="Logo Logo-avatarHover" alt="Josh Frankel (Author)" />
    </div>
    <div class="Logo Logo-logo">
      <span class="Logo Logo-first-name">Development</span>
      <span class="Logo Logo-last-name">Simplified</span>
    </div>
  </a>

  <nav class="flex-right">
    
      
      <a href="/blog" >Blog</a>
    
      
      <a href="/blog/categories" >Categories</a>
    
      
      <a href="/blog/tags" >Tags</a>
    
      
      <a href="/blog/archives" >Archives</a>
    
      
      <a href="/" >About</a>
    
  </nav>
</header>


    <div class="Banner">
  <div class="Container Container-flex Container--wrap">
    <h1 class="Banner-heading">Using attr_accesor for Class level methods</h1>

    
      <p class="Banner-information">
        <time>April 4, 2018</time>
      </p>
    
  </div>
</div>


    <div class="Content Container Container-flex">
      <article class="Post">
  





  <p>The beginning steps to writing a new class usually involve writing a quick
<code>def initialize</code> method. The purpose of these type of methods is to
setup any dependencies or configurations necessary for the object to fulfill its
responsibility. With instance variables, a common paradigm is to use an attr_reader
or attr_writer to read/write values. However, these methods specifically work
off of instance variables.
<!--excerpt--></p>

<p>attr_reader :element</p>

<h2 id="the-difference-between-instance-variables-and-class-variables">The difference between instance variables and class variables</h2>

<p>An <code>attr_</code> is basically a shortcut for getter and setter methods. For
example, if you have the following initializer method, and wanted to access the 
instance variable <code>@element</code> in a private method, you might do something
like this:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">SiteBuilder</span>
  <span class="nb">attr_accessor</span> <span class="ss">:element</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="vi">@element</span> <span class="o">=</span> <span class="n">element</span>
    <span class="n">add_timestamp_to_element</span>
    <span class="vi">@element</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="c1"># Notice we no longer need to reference the instance variable but can instead</span>
  <span class="c1"># call element which is now part of the attr_accessor reader portion</span>
  <span class="k">def</span> <span class="nf">add_timestamp_to_element</span>
    <span class="n">element</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="ss">timestamp: </span><span class="no">DateTime</span><span class="p">.</span><span class="nf">now</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>This approach works because you reference the set instance variable @element. However,
for class methods you don’t have access to instance level variables so something
like the following won’t work:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">SiteBuilder</span>
  <span class="nb">attr_accessor</span> <span class="ss">:element</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">format</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="vi">@element</span> <span class="o">=</span> <span class="n">element</span>
    <span class="n">append_timestamp</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">add_timestamp_to_element</span>
    <span class="n">element</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="ss">timestamp: </span><span class="no">DateTime</span><span class="p">.</span><span class="nf">now</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>The reason the instance variable isn’t available is that the context that the
above is ran in is the class context. In other words it runs directly off the class
like a method while instances of that class represent an object.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">SiteBuilder</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">element</span><span class="p">)</span> <span class="c1">#=&gt; Returns an element with the updated timestamp</span>
<span class="no">SiteBuilder</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">element</span><span class="p">)</span> <span class="c1">#=&gt; Explodes horribly in a deadly fire tornado</span></code></pre></figure>

<p>For SiteBuilder.new(element), we are creating a new object instance of the SiteBuilder
class. The element becomes part of its properties or what describes its data and features.</p>

<p>For SiteBuilder.format(element), we are calling a method that works off of whatever
the input is. It isn’t a new object but rather a way to perform an operation on
something that doesn’t need an object.</p>

<h2 id="using-an-attr_accessor-method-with-class-level-methods">Using an attr_accessor method with class level methods</h2>

<p>Still want to have the benefits of attr_reader, attr_writer, and attr_accessor? We
can implement another approach that allows the usage of these instance variables in
a class level context. Basically what it does is create an instance variable in
the class context to be used elsewhere.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">SiteBuilder</span>

  <span class="c1"># Creates an instance variable in the class context</span>
  <span class="k">class</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span>
    <span class="nb">attr_accessor</span> <span class="ss">:element</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">format</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">element</span> <span class="o">=</span> <span class="n">element</span> <span class="c1"># We need to set the variable directly on the class</span>
    <span class="n">append_timestamp</span>
  <span class="k">end</span>

  <span class="c1"># We can now use the following shorthand without the @ symbol</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">add_timestamp_to_element</span>
    <span class="n">element</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="ss">timestamp: </span><span class="no">DateTime</span><span class="p">.</span><span class="nf">now</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>



  <!-- Prev Posts -->
  <div class="Post-actions">
    
      <a class="Post-actions--prev TooltipContainer" href="/blog/enable-eslint-for-sublimelinter-while-using-asdf-for-version-management/" alt="Enable ESLint for SublimeLinter while using asdf for version management">&#171; Previous Post<div class="TooltipContainer-text TooltipContainer-text--post">Enable ESLint for SublimeLinter while using asdf for version management</div></a>
    
    
      <a class="Post-actions--next TooltipContainer" href="/blog/how-to-call-pry-from-within-a-simpledelegator-decorator/" alt="How to call Pry from within a SimpleDelegator Decorator">Next Post &#187;<div class="TooltipContainer-text TooltipContainer-text--post">How to call Pry from within a SimpleDelegator Decorator</div></a>
    
  </div>

  <!-- Comments System -->
  <div class="Comments">
    <h2>Join the conversation</h2>

    <div id="disqus_thread"></div>
  </div>

  <script type="text/javascript">
      var disqus_shortname = 'joshmfrankel';
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>

    </div>

    <footer class="Footer">
  <div class="Container Container-flex Container--smallMargin">
    <section class="Footer-links">
      
        
        <a href="/blog" >Blog</a>
      
        
        <a href="/blog/categories" >Categories</a>
      
        
        <a href="/blog/tags" >Tags</a>
      
        
        <a href="/blog/archives" >Archives</a>
      
        
        <a href="/" >About</a>
      
    </section>
  </div>

  <div class="Footer-actions">
    <div class="Container Container--smallMargin">
      <div class="FooterActions">
        <section class="FooterActions-posts">
          <h2 class="FooterActions-title">Latest Posts</h2>
          <nav>
            
              <a href="/blog/when-is-an-array-an-array-strategies-for-checking-array-equality-in-ruby/">When is an Array an Array? Strategies for checking Array equality in Ruby</a>
            
              <a href="/blog/how-to-fix-homebrew-postgres-error-256/">How to fix homebrew postgres error 256</a>
            
              <a href="/blog/dont-slack-on-site-reliability/">Don't Slack on Site Reliability</a>
            
              <a href="/blog/creating-blurred-background-images-with-overlay-text-in-css/">Creating blurred background images with overlay text in CSS</a>
            
              <a href="/blog/lemme-pencil-you-in-using-icalendar-and-rails-to-sync-calendar-events/">Lemme pencil you in: Using iCalendar and Rails to sync calendar events</a>
            
              <a href="/blog/introducing-simplecov+-action-a-github-action-for-ensuring-test-coverage/">Introducing SimpleCov+ Action: A Github action for ensuring test coverage</a>
            
          </nav>
        </section>

        <section class="FooterActions-contact">
          <h2 class="FooterActions-title">Get in Contact with Me</h2>
          <nav>
            <a href="mailto:joshmfrankel+website@gmail.com">
              <i class="fa fa-paper-plane" aria-hidden="true"></i>&nbsp;
              I'm easy to get a hold of
            </a>

            <a href="https://github.com/joshmfrankel">
              <i class="fab fa-github-alt" aria-hidden="true"></i>&nbsp;
              I have no (git) commit hangups
            </a>

            <a href="https://rubyonrails-link.slack.com/messages/@joshmfrankel/">
              <i class="fab fa-slack-hash" aria-hidden="true"></i>&nbsp;
              I share what I learn
            </a>

            <a href="https://stackoverflow.com/users/906974/josh-frankel">
              <i class="fab fa-stack-overflow" aria-hidden="true"></i>&nbsp;
              I give back to the community
            </a>

            <a href="https://twitter.com/Joshmfrankel">
              <i class="fab fa-twitter" aria-hidden="true"></i>&nbsp;
              I like to be social
            </a>

            <a href="https://www.linkedin.com/in/joshmfrankel/">
              <i class="fab fa-linkedin" aria-hidden="true"></i>&nbsp;
              I take professionalism seriously
            </a>
          </nav>
        </section>
      </div>

      <section class="Footer-actions-copyright">
        <p>© 2011-2023+ Josh Frankel. Development Simplified. All rights reserved</p>
      </section>
    </div>
  </div>
</footer>




    
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-40607351-1', 'auto');
    ga('send', 'pageview');
  </script>


  </body>
</html>
