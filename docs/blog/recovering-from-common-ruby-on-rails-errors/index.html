<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">

  <link rel="stylesheet" href="/css/main.css">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700|Raleway:300,300i,700,700i" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">

  <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js" integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ" crossorigin="anonymous"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded",function(){
      let node = document.querySelector('.preload-transitions');
      node.classList.remove('preload-transitions');
    });
  </script>

  <link rel="alternate" type="application/rss+xml" title="Development Simplified" href="/feed.xml">

  <!-- Begin Jekyll SEO tag v2.6.0 -->
<title>Recovering from common Ruby on Rails errors and pitfalls | Development Simplified</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Recovering from common Ruby on Rails errors and pitfalls" />
<meta name="author" content="Josh Frankel (@joshmfrankel)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ruby on Rails is great to give out detailed error messages. Additionally, there is a wealth of knownledge in the online community of other developers running into the exact same error and the reasons behind why they are occuring. Over the past couple months I have compiled 5 errors that I see most often." />
<meta property="og:description" content="Ruby on Rails is great to give out detailed error messages. Additionally, there is a wealth of knownledge in the online community of other developers running into the exact same error and the reasons behind why they are occuring. Over the past couple months I have compiled 5 errors that I see most often." />
<link rel="canonical" href="http://joshfrankel.me/blog/recovering-from-common-ruby-on-rails-errors/" />
<meta property="og:url" content="http://joshfrankel.me/blog/recovering-from-common-ruby-on-rails-errors/" />
<meta property="og:site_name" content="Development Simplified" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-12-30T02:31:03+00:00" />
<script type="application/ld+json">
{"datePublished":"2015-12-30T02:31:03+00:00","dateModified":"2015-12-30T02:31:03+00:00","headline":"Recovering from common Ruby on Rails errors and pitfalls","mainEntityOfPage":{"@type":"WebPage","@id":"http://joshfrankel.me/blog/recovering-from-common-ruby-on-rails-errors/"},"url":"http://joshfrankel.me/blog/recovering-from-common-ruby-on-rails-errors/","author":{"@type":"Person","name":"Josh Frankel (@joshmfrankel)"},"@type":"BlogPosting","description":"Ruby on Rails is great to give out detailed error messages. Additionally, there is a wealth of knownledge in the online community of other developers running into the exact same error and the reasons behind why they are occuring. Over the past couple months I have compiled 5 errors that I see most often.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="theme-color" content="#61b8d0"/>
</head>

  <body class="preload-transitions">
    <header class="Container Container-flex Container--smallMargin Header">

  <a href="/" class="Logo-container">
    <div class="Logo-avatarContainer">
      <img src="/img/layout/josh-frankel-author-100x100.jpg" class="Logo Logo-avatar" alt="Josh Frankel (Author)" />
      <img src="/img/layout/josh-frankel-author-hover-100x100.jpg" class="Logo Logo-avatarHover" alt="Josh Frankel (Author)" />
    </div>
    <div class="Logo Logo-logo">
      <span class="Logo Logo-first-name">Development</span>
      <span class="Logo Logo-last-name">Simplified</span>
    </div>
  </a>

  <nav class="flex-right">
    
      
      <a href="/blog" >Blog</a>
    
      
      <a href="/blog/categories" >Categories</a>
    
      
      <a href="/blog/tags" >Tags</a>
    
      
      <a href="/blog/archives" >Archives</a>
    
      
      <a href="/" >About</a>
    
  </nav>
</header>


    <div class="Banner">
  <div class="Container Container-flex Container--wrap">
    <h1 class="Banner-heading">Recovering from common Ruby on Rails errors and pitfalls</h1>

    
      <p class="Banner-information">
        <time>December 30, 2015</time>
      </p>
    
  </div>
</div>


    <div class="Content Container Container-flex">
      <article class="Post">
  





  <p>Ruby on Rails is great to give out detailed error messages. Additionally, there is a wealth of knownledge in the online community of other developers running into the exact same error and the reasons behind why they are occuring. Over the past couple months I have compiled 5 errors that I see most often.</p>
<!--excerpt-->

<ol>
  <li><a href="#1">A server is already running. Check pids/server.pid</a></li>
  <li><a href="#2">bind: Address already in use - bind(2) for 127.0.0.1:3000 (Errno::EADDRINUSE)</a></li>
  <li><a href="#3">Terminal outputs rails console errors after stopping execution</a></li>
  <li><a href="#4">NameError at [route] uninitialized constant [class-name]</a></li>
  <li><a href="#5">MultiJson::ParseError at [route]. Oj::ParseError</a></li>
</ol>
<br />
<h2 id="1">A server is already running</h2>
<hr />
<h3><strong>What it looks like:</strong></h3>
<figure class="highlight"><pre><code class="language-bash" data-lang="bash">A server is already running. Check /Users/username/Rails/sourcing/tmp/pids/server.pid.</code></pre></figure>
<h3><strong>What it means:</strong></h3>
<p>Occassionally, when halting or using <code>ctrl+c</code> to stop a rails server instance it will fail to unlock its process id. This will prevent you from starting a new server for the project as the server will think it is still running when it is in fact not.</p>

<h3><strong>How to fix it: </strong></h3>
<div class="well">
  <p>Remove the server.pid file from the project.</p>
  <p><code>rm /tmp/pids/server.pid</code></p>
</div>
<br />
<h2 id="2">Address already in use</h2>
<hr />
<h3><strong>What it looks like:</strong></h3>
<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">=&gt;</span> Booting WEBrick
<span class="o">=&gt;</span> Rails 4.2.4 application starting <span class="k">in </span>development on http://localhost:3000
<span class="o">=&gt;</span> Run <span class="sb">`</span>rails server <span class="nt">-h</span><span class="sb">`</span> <span class="k">for </span>more startup options
<span class="o">=&gt;</span> Ctrl-C to shutdown server
<span class="o">[</span>2015-10-03 14:00:40] INFO  WEBrick 1.3.1
<span class="o">[</span>2015-10-03 14:00:40] INFO  ruby 2.2.1 <span class="o">(</span>2015-02-26<span class="o">)</span> <span class="o">[</span>x86_64-darwin14]
Exiting
/Users/jfrankel/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/socket.rb:206:in <span class="sb">`</span><span class="nb">bind</span><span class="s1">': Address already in use - bind(2) for 127.0.0.1:3000 (Errno::EADDRINUSE)</span></code></pre></figure>

<h3><strong>What it means:</strong></h3>
<p>This error means that the port number you specified is still in use by another application or potentially an unclosed instance of your rails server. Typically the port Rails uses is 3000 so we need to make sure that there isn't another process already using it.</p>

<h3><strong>How to fix it:</strong></h3>
<div class="well">
  <p>List out all the processes using the port your Rails server is using (default 3000). Switch tcp:3000 to just tcp if you want to list all processes.</p>
  <code>lsof -wni tcp:3000</code>
  <p>You should receive an output that looks like this:</p>

  <figure class="highlight"><pre><code class="language-bash" data-lang="bash">  COMMAND   PID     USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
  ruby    41704 jfrankel   12u  IPv6 0xf3fe9a8ff1e035b9      0t0  TCP <span class="o">[</span>::1]:hbci <span class="o">(</span>LISTEN<span class="o">)</span>
  ruby    41704 jfrankel   13u  IPv4 0xf3fe9a8ff6649a29      0t0  TCP 127.0.0.1:hbci <span class="o">(</span>LISTEN<span class="o">)</span>
  </code></pre></figure>

  <p>Then all you need to do is kill the specific process based on its PID. You can supply multiple PID's to the kill method separated by a space each if there are additional processes that need to be stopped.</p>
  <code>kill -9 41704</code>
</div>
<br />
<h2 id="3">Rails console gives errors in terminal after closing with Ctrl+z</h2>
<hr />
<h3><strong>What it looks like:</strong></h3>
<figure class="highlight"><pre><code class="language-bash" data-lang="bash">jfrankel<span class="nv">$ </span>rails c
Loading development environment <span class="o">(</span>Rails 4.2.4<span class="o">)</span>
2.2.1 :002 <span class="o">&gt;</span>
<span class="o">[</span>1]+  Stopped                 rails c
jfrankel<span class="nv">$ </span><span class="nb">ls</span>
<span class="nt">-bash</span>: l: <span class="nb">command </span>not found

jfrankel<span class="nv">$ </span>ruby <span class="nt">-v</span>
<span class="nt">-bash</span>: uy-: <span class="nb">command </span>not found

jfrankel<span class="nv">$ </span><span class="nb">exit
</span>NameError: undefined <span class="nb">local </span>variable or method <span class="sb">`</span>vei<span class="s1">' for main:Object</span></code></pre></figure>
<h3><strong>What it means:</strong></h3>
<p>Rails console doesn't exit cleanly when you use <code>ctrl+z</code>. This is due to the fact that <code>ctrl+z</code> doesn't actually exit a command line program but instead pauses them. Because of this the commands in the terminal get all jumbled up.</p>
<h3><strong>How to fix it:</strong></h3>
<div class="well">
  Typing the keyword <code>exit</code> or using the preferred stop command of <code>ctrl+c</code> will properly stop rails console, but this is only valid for the next time you run rails console. For now you will have to restart the current terminal session or just close the window and start a new terminal session up.
</div>


<br />
<h2 id="4">Name Error</h2>
<hr />
<h3><strong>What it looks like:</strong></h3>
<figure class="highlight"><pre><code class="language-bash" data-lang="bash">NameError at /awards/11
uninitialized constant User::NotificationSetting</code></pre></figure>
<h3><strong>What it means:</strong></h3>
<p>This is a farily straight forward error. Try re-reading the output error message and it starts to make sense. It is saying that there is an uninitalized constant, which could be a class or variable.</p>
<p>This most likely is a class and or variable name that has a typo in it or doesn't exist yet in this context.</p>
<h3><strong>How to fix it:</strong></h3>
<div class="well">
  Make sure to double check spellings of classes and variables.<br /><br />Additionally, something that can trip you up is to make sure the plurality of the constant is correct. Models are singular while controllers are plural.
</div>
<br />
<h2 id="5">MultiJson::ParseError with cookies</h2>
<hr />
<h3><strong>What it looks like:</strong></h3>
<figure class="highlight"><pre><code class="language-bash" data-lang="bash">MultiJson::ParseError at /login
Oj::ParseError</code></pre></figure>
<h3><strong>What it means:</strong></h3>
<p>This error is indicating that some JSON is not being parsed correctly. In the case of cookies it could mean that the cookie doesn't exist or is an valid that is not able to be parsed.</p>
<h3><strong>How to fix it:</strong></h3>
<div class="well">
  There are a couple of fixes for this issue. The easiest is to remove all cookies for the domain in question using chrome resource tab inside developer tools. This will force the cookies to be recreated.<br /><br />
  Additionally, writing code that gracefully degrades to a default valid value could also fix it. For example adding an empty json array as a backup value as shown below. <code>|| "{}"</code>
  <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">preferences</span>
  <span class="vi">@_preferences</span> <span class="o">||=</span> <span class="no">MultiJson</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">cookies</span><span class="p">[</span><span class="s2">"preferences_</span><span class="si">#{</span><span class="n">get_preference_group</span><span class="si">}</span><span class="s2">"</span><span class="p">]</span> <span class="o">||</span> <span class="s2">"{}"</span><span class="p">)</span>
<span class="k">end</span>
  </code></pre></figure>
</div>

<p>Do you have a different solution to a common error I've listed here? Got another error you keep running into? Leave me a comment below. I'm looking forward to hearing from you.</p>


  <!-- Prev Posts -->
  <div class="Post-actions">
    
      <a class="Post-actions--prev TooltipContainer" href="/blog/accessing-instance-variables-within-a-rspec-controller-test/" alt="Accessing instance variables within a Rspec controller test">&#171; Previous Post<div class="TooltipContainer-text TooltipContainer-text--post">Accessing instance variables within a Rspec controller test</div></a>
    
    
      <a class="Post-actions--next TooltipContainer" href="/blog/add-multiple-columns-to-a-ruby-on-rails-migration/" alt="Add multiple columns to an existing table with a Rails migration">Next Post &#187;<div class="TooltipContainer-text TooltipContainer-text--post">Add multiple columns to an existing table with a Rails migration</div></a>
    
  </div>

  <!-- Comments System -->
  <div class="Comments">
    <h2>Join the conversation</h2>

    <div id="disqus_thread"></div>
  </div>

  <script type="text/javascript">
      var disqus_shortname = 'joshmfrankel';
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>

    </div>

    <footer class="Footer">
  <div class="Container Container-flex Container--smallMargin">
    <section class="Footer-links">
      
        
        <a href="/blog" >Blog</a>
      
        
        <a href="/blog/categories" >Categories</a>
      
        
        <a href="/blog/tags" >Tags</a>
      
        
        <a href="/blog/archives" >Archives</a>
      
        
        <a href="/" >About</a>
      
    </section>
  </div>

  <div class="Footer-actions">
    <div class="Container Container--smallMargin">
      <div class="FooterActions">
        <section class="FooterActions-posts">
          <h2 class="FooterActions-title">Latest Posts</h2>
          <nav>
            
              <a href="/blog/when-is-an-array-an-array-strategies-for-checking-array-equality-in-ruby/">When is an Array an Array? Strategies for checking Array equality in Ruby</a>
            
              <a href="/blog/how-to-fix-homebrew-postgres-error-256/">How to fix homebrew postgres error 256</a>
            
              <a href="/blog/dont-slack-on-site-reliability/">Don't Slack on Site Reliability</a>
            
              <a href="/blog/creating-blurred-background-images-with-overlay-text-in-css/">Creating blurred background images with overlay text in CSS</a>
            
              <a href="/blog/lemme-pencil-you-in-using-icalendar-and-rails-to-sync-calendar-events/">Lemme pencil you in: Using iCalendar and Rails to sync calendar events</a>
            
              <a href="/blog/introducing-simplecov+-action-a-github-action-for-ensuring-test-coverage/">Introducing SimpleCov+ Action: A Github action for ensuring test coverage</a>
            
          </nav>
        </section>

        <section class="FooterActions-contact">
          <h2 class="FooterActions-title">Get in Contact with Me</h2>
          <nav>
            <a href="mailto:joshmfrankel+website@gmail.com">
              <i class="fa fa-paper-plane" aria-hidden="true"></i>&nbsp;
              I'm easy to get a hold of
            </a>

            <a href="https://github.com/joshmfrankel">
              <i class="fab fa-github-alt" aria-hidden="true"></i>&nbsp;
              I have no (git) commit hangups
            </a>

            <a href="https://rubyonrails-link.slack.com/messages/@joshmfrankel/">
              <i class="fab fa-slack-hash" aria-hidden="true"></i>&nbsp;
              I share what I learn
            </a>

            <a href="https://stackoverflow.com/users/906974/josh-frankel">
              <i class="fab fa-stack-overflow" aria-hidden="true"></i>&nbsp;
              I give back to the community
            </a>

            <a href="https://twitter.com/Joshmfrankel">
              <i class="fab fa-twitter" aria-hidden="true"></i>&nbsp;
              I like to be social
            </a>

            <a href="https://www.linkedin.com/in/joshmfrankel/">
              <i class="fab fa-linkedin" aria-hidden="true"></i>&nbsp;
              I take professionalism seriously
            </a>
          </nav>
        </section>
      </div>

      <section class="Footer-actions-copyright">
        <p>Â© 2011-2023+ Josh Frankel. Development Simplified. All rights reserved</p>
      </section>
    </div>
  </div>
</footer>




    
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-40607351-1', 'auto');
    ga('send', 'pageview');
  </script>


  </body>
</html>
