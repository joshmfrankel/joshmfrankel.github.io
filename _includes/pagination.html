<section class="Listing">
  {% comment %}@todo There's got to be a better way here{% endcomment %}
  {% if jekyll.environment == "production" %}
    {% assign current_url = "http://joshfrankel.me/blog/" %}
  {% else %}
    {% assign current_url = "http://localhost:4000/blog/" %}
  {% endif %}
  <!-- This loops through the paginated posts -->
  {% for post in paginator.posts %}
    <article class="Listing Listing-article">
      <h1 class="Listing Listing-title"><a href="{{ post.url }}">{{ post.title }}</a></h1>
      <h2 class="Listing Listing-category"><em>posted in <a href="{{ current_url | append: "categories#" | append: post.categories.first }}">{{ post.categories.first | replace: '-', ' ' }}</a></em></h2>

      <p class="Listing Listing-date">
        <i class="fa fa-calendar" aria-hidden="true"></i>&nbsp;<time datetime="{{ post.date | date: '%Y-%m-%d' }}">{{ post.date | date: "%B %-d, %Y" }}</time>
      </p>
      <div class="Listing Listing-content">
        {{ post.excerpt }}
      </div>
      <div class="Listing Listing-tags">
        {% for tag in post.tags %}
          <a href="/blog/tags#{{ tag }}">#{{ tag }}</a>
        {% endfor %}
      </div>
    </article>
  {% endfor %}
</section>

<!-- Pagination links -->
<section class="Pagination">
  {% if paginator.page_trail %}
    {% for trail in paginator.page_trail %}
      {% assign trail_path_url = trail.path | append: "index.html" %}
      <li {% if page.url == trail_path_url %}class="selected"{% endif %}>
          <a href="{{ trail.path | prepend: site.baseurl }}" title="{{trail.title}}">{{ trail.num }}</a>
      </li>
    {% endfor %}
  {% endif %}
</section>

